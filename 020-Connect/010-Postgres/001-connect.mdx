---
title: Connect to Postgres
navTitle: Connect
keywords: ['postgres', 'connect', 'dsn']
description: Learn how to connect to Postgres
slug: postgres/connect
published: true
---

<Alert status="info">The Postgres wire protocol is still considered Beta.</Alert>

This page shows you how to connect to Postgres, by explaining how a connection string is built, the different parameters and examples to connect via [psql](https://www.postgresql.org/docs/current/app-psql.html).

## Connection string

The connection string to connect to Postgres is constructed the following:

```
postgresql://[User]:[Password]@[Host]:[Port]/[Database]
```

The following conversion table illustrates how the connection string parameters are mapped to Xata.

| Postgres | Xata                       | Example                 |
| -------- | -------------------------- | ----------------------- |
| User     | Workspace Id               | `ws1234`                |
| Password | API Key                    | `xau_apikey123456`      |
| Host     | Region plus `.sql.xata.sh` | `us-east-1.sql.xata.sh` |
| Port     | `5432` or empty            | `5432`                  |
| Database | Database and branch name   | `Games:main`            |

With the example values from above, the connection string to connect to our database `Games` on branch `main` is constructed as:

```
postgresql://ws1234:xau_apikey123456@us-east-1.sql.xata.sh:5432/Games:main
```

The connection strings for the HTTP access and for the Postgres wire protocol are shown to you when you create a new database, afterwards you can always navigate to the database settings to see the URL construction.
![Database settings showing connection strings](images/connection-string.png)

To create a new API key, or manage your existing ones, you need to open your [account settings](https://app.xata.io/settings).

Using psql to connect to your database, based off the previously constructed connection string with the example values:

```bash
psql "postgresql://ws1234:xau_apikey123456@us-east-1.sql.xata.sh:5432/Games:main"

Games:main=>
```

## Supported Versions

You can check the Postgres version with the following command:

```bash
psql "postgresql://[Workspace Id]:[API Key]@[Region].sql.xata.sh:[Port]/[Database]:[Branch]" -c "select version()"
```

```sql
                                                   version
-------------------------------------------------------------------------------------------------------------
 PostgreSQL 15.4 on aarch64-unknown-linux-gnu, compiled by aarch64-unknown-linux-gnu-gcc (GCC) 9.5.0, 64-bit
(1 row)
```

### Shared cluster

Version: `15.4`

In a shared cluster, you operate in a multi tenant environment, sharing the same Postgres version. Minor version upgrades are continuously updated.
If you want control of the version, you should consider a dedicated cluster.

### Dedicated cluster

You can select which version you want, currently supported versions in all [available regions](/docs/getting-started/available-regions):

- 15.4
- 15.5
- 14.10
- 14.9

You can control the maintenance windows and the version upgrades yourself.

## Extensions

The available, out-of-the-box extensions are:

- list

If you are on a dedicated cluster you can install extensions yourself, please consult the [Postgres documentation](https://www.postgresql.org/docs/current/sql-createextension.html) for a how to.

## pg_dump and pg_restore

TODO

## Supported Statements

Xata offers different approaches to Postgres, from SQL over HTTP to pure Postgres over the wire protocol to a shared or dedicated cluster.
Each come with a security scope, to provide isolation in a multi tenant environment.

|                   | FUNCTIONS | DQL statements | (some) DML statements | DDL statements |
| ----------------- | --------- | -------------- | --------------------- | -------------- |
| SQL over HTTP     | N         | Y              | Y                     | Y              |
| Shared cluster    | N         | Y              | Y                     | Y              |
| Dedicated cluster | Y         | Y              | Y                     | Y              |

The table below, is providing a more granular picture of the supported statements.

|                          | SQL over HTTP | Shared Cluster | Dedicated Cluster |
| ------------------------ | ------------- | -------------- | ----------------- |
| `SELECT`                 | Y             | Y              | Y                 |
| `INSERT`                 | Y             | Y              | Y                 |
| `DELETE`                 | Y             | Y              | Y                 |
| `UPDATE`                 | Y             | Y              | Y                 |
| `SHOW`                   | Y             | Y              | Y                 |
| `ALTER TABLE`            | Y             | Y              | Y                 |
| `CREATE TABLE`           | Y             | Y              | Y                 |
| `DROP TABLE`             | Y             | Y              | Y                 |
| `BEGIN`                  | N             | Y              | Y                 |
| `COMMIT`                 | N             | Y              | Y                 |
| `ROLLBACK`               | N             | Y              | Y                 |
| `SET`                    | N             | Y              | Y                 |
| `COPY`                   | N             | Y              | Y                 |
| `LOCK`                   | N             | Y              | Y                 |
| `PREPARE`                | N             | Y              | Y                 |
| `EXECUTE`                | N             | Y              | Y                 |
| `TRUNCATE`               | Y             | Y              | Y                 |
| `ALTER INDEX`            | N             | N              | Y                 |
| `DROP INDEX`             | N             | N              | Y                 |
| `ALTER TRIGGER`          | N             | N              | Y                 |
| `CREATE TRIGGER`         | N             | N              | Y                 |
| `DROP TRIGGER`           | N             | N              | Y                 |
| `ALTER EVENTTRIGGER`     | N             | N              | Y                 |
| `CREATE EVENTTRIGGER`    | N             | N              | Y                 |
| `DROP EVENTTRIGGER`      | N             | N              | Y                 |
| `ALTER SEQUENCE`         | N             | N              | Y                 |
| `CREATE SEQUENCE`        | N             | N              | Y                 |
| `DROP SEQUENCE`          | N             | N              | Y                 |
| `CALL`                   | N             | N              | Y                 |
| `ALTER STATISTICS`       | N             | N              | Y                 |
| `CREATE STATISTICS`      | N             | N              | Y                 |
| `DROP STATISTICS`        | N             | N              | Y                 |
| `ALTER RULE`             | N             | N              | Y                 |
| `CREATE RULE`            | N             | N              | Y                 |
| `DROP RULE`              | N             | N              | Y                 |
| `ALTER TYPE`             | N             | N              | Y                 |
| `CREATE TYPE`            | N             | N              | Y                 |
| `DROP TYPE`              | N             | N              | Y                 |
| `ALTER DOMAIN`           | N             | N              | Y                 |
| `CREATE DOMAIN`          | N             | N              | Y                 |
| `DROP DOMAIN`            | N             | N              | Y                 |
| `ALTER FUNCTION`         | N             | N              | Y                 |
| `CREATE FUNCTION`        | N             | N              | Y                 |
| `DROP FUNCTION`          | N             | N              | Y                 |
| `EXPLAIN`                | N             | N              | Y                 |
| `REINDEX`                | N             | N              | Y                 |
| `ALTER OPERATOR CLASS`   | N             | N              | Y                 |
| `CREATE OPERATOR CLASS`  | N             | N              | Y                 |
| `DROP OPERATOR CLASS`    | N             | N              | Y                 |
| `CREATE EXTENSION`       | N             | N              | Y                 |
| `DROP EXTENSION`         | N             | N              | Y                 |
| `ALTER EXTENSION`        | N             | N              | Y                 |
| `CREATE TEMPORARY TABLE` | N             | N              | Y                 |

## Limitations

### Unsupported statements and functions

The following statements and/or functions are not available:

- `SELECT user`
- `SHOW password_encryption`
- `SET ROLE`
- `RESET ROLE`
- `SET SESSION AUTHORIZATION`
- `ALTER TABLESPACE`
- `CREATE TABLESPACE`
- `DROP TABLESPACE`

### Connection limits

- SQL over HTTP to a shared cluster has the rate limits in place, for a dedicated cluster there are none.
- Shared cluster - TODO, amount of available connections
- Dedicated cluster - no limit to connections

### `xata_` Column prefix

Xata reserves the `xata_` column prefix for [special columns](docs/concepts/data-model#special-columns) and rejects any custom created columns with the prefix.

### sslmode

Xata does not allow plain text connections, this may have an effect on the client you are using and the default that is inferred by such.
If you face an issue with an error message as shown below, append the SSL mode `require` option to the connection string or pass in a parameterized way depending on the tool you are using.

```bash
psql: error: connection to server at "eu-west-1.sql.xata.sh" (12.34.56.89), port 5432 failed: SSL required
```

Example given:

```bash
psql "postgresql://ws1234:xau_apikey123456@us-east-1.sql.xata.sh:5432/Games:main?sslmode=require"
```

Please refer to the main Postgres documentation for more in depth information about the [sslmodes](https://www.postgresql.org/docs/current/libpq-ssl.html) option.
